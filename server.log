🚀 RatMemcached - 高性能 Memcached 协议兼容服务器
📦 基于 rat_memcache (MelangeDB存储后端)
⚡ 支持完整的 Memcached 协议
🧠 使用 mimalloc 高性能内存分配器
⚙️ 服务器配置:
  - 绑定地址: 127.0.0.1:11211
  - 预设配置: Some("high_speed_communication")
  - 配置文件: cache_config.toml
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m🚀 初始化 RatMemcached 服务器[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m📍 绑定地址: 127.0.0.1:11211[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m📊 缓存配置详情:[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m  🎯 L1 内存缓存:[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 最大内存: 1024.00 MB[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 最大条目: 100000[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 淘汰策略: Lru[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m  💾 L2 MelangeDB 持久化缓存:[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 启用状态: 是[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 数据目录: ./rat_memcache_data[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 最大磁盘空间: 1024.00 MB[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 块缓存大小: 32.00 MB[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 写缓冲区: 64.00 MB[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 压缩: 启用[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - MelangeDB 压缩算法: Lz4[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 缓存大小: 512 MB[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 最大文件大小: 1024 MB[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 智能Flush: 启用[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - Flush间隔: 20-500ms (基础: 100ms)[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 缓存预热策略: Recent[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 统计信息: 启用[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m  ⏰ TTL 配置:[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 默认TTL: 3600秒[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 最大TTL: 86400秒[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 清理间隔: 300秒[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m  🗜️  压缩配置:[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - LZ4压缩: 启用[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 压缩阈值: 1024 bytes[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 压缩级别: 6[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m  ⚡ 性能配置:[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 工作线程: 4[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 并发支持: 启用[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 读写分离: 启用[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m    - 大值阈值: 10240 bytes (10KB)[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m  🧠 内存分配器: mimalloc (高性能优化)[0m
[[92mINFO [0m] [90m18:08:15.920[0m [RAT-CACHE] [97m[TTL] TTL 管理器已启动[0m
[[92mINFO [0m] [90m18:08:15.921[0m [RAT-CACHE] [97m[TTL] TTL 清理任务已启动，间隔: 300秒[0m
[[92mINFO [0m] [90m18:08:15.921[0m [RAT-CACHE] [97m✅ 缓存实例创建成功[0m
🔧 [DEBUG] 原始数据片段 (前100字节): [115, 101, 116, 32, 98, 117, 102, 102, 101, 114, 95, 116, 101, 115, 116, 95, 107, 101, 121, 32, 48, 32, 51, 48, 48, 32, 52, 55, 53, 48, 48, 13, 10, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70]
🔧 [DEBUG] 累积缓冲区长度: 4096 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79]
🔧 [DEBUG] 累积缓冲区长度: 8159 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82]
🔧 [DEBUG] 累积缓冲区长度: 12255 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69]
🔧 [DEBUG] 累积缓冲区长度: 16351 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69]
🔧 [DEBUG] 累积缓冲区长度: 20447 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66]
🔧 [DEBUG] 累积缓冲区长度: 24543 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95]
🔧 [DEBUG] 累积缓冲区长度: 28639 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70]
🔧 [DEBUG] 累积缓冲区长度: 32735 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67]
🔧 [DEBUG] 累积缓冲区长度: 36831 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95]
🔧 [DEBUG] 累积缓冲区长度: 40927 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84]
🔧 [DEBUG] 累积缓冲区长度: 45023 chars
🔧 [DEBUG] 原始数据片段 (前100字节): [82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83, 84, 95, 83, 79, 67, 75, 69, 84, 95, 66, 85, 70, 70, 69, 82, 95, 84, 69, 83]
🔧 [DEBUG] 累积缓冲区长度: 47502 chars
🔧 [DEBUG] 发送响应: 8 bytes
🔧 [DEBUG] 响应发送成功!
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m🔧 初始化传统 TCP 监听器[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m🔧 配置平台特定的 TCP 优化[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m✅ TCP 优化配置完成[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m✅ TCP 监听器创建成功，地址: 127.0.0.1:11211[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m✅ 服务器创建成功，开始监听...[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m🚀 启动 RatMemcached 服务器[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m🔗 开始监听连接...[0m
[[92mINFO [0m] [90m18:08:21.917[0m [RAT-CACHE] [97m🔗 新连接来自: 127.0.0.1:55342[0m
🔧 [DEBUG] 原始数据片段 (前100字节): [103, 101, 116, 32, 98, 117, 102, 102, 101, 114, 95, 116, 101, 115, 116, 95, 107, 101, 121, 13, 10]
🔧 [DEBUG] 累积缓冲区长度: 21 chars
🔧 [DEBUG] 立即执行命令路径...
🔧 [DEBUG] execute_command: 返回Value响应，数据大小: 47500 bytes
🔧 [DEBUG] format_response: 准备发送大值响应 - key: buffer_test_key, data_size: 47500 bytes
🔧 [DEBUG] format_response: 响应总大小: 47538 bytes (header: 31 + data: 47500 + trailer: 7)
🔧 [DEBUG] 立即执行路径: 发送响应: 47538 bytes
🔧 [DEBUG] 立即执行路径: 响应发送成功!
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m🔗 开始处理 TCP 连接[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 4096 字节数据[0m
[[92mINFO [0m] [90m18:08:22.928[0m [RAT-CACHE] [97m📨 接收到 2479 字节数据[0m
[[92mINFO [0m] [90m18:08:22.929[0m [RAT-CACHE] [97m执行 SET 命令: buffer_test_key (47500 bytes, TTL: 300)[0m
[[92mINFO [0m] [90m18:08:22.929[0m [RAT-CACHE] [97mSET 成功: buffer_test_key[0m
[[92mINFO [0m] [90m18:08:22.929[0m [RAT-CACHE] [97m🔗 新连接来自: 127.0.0.1:55350[0m
[[92mINFO [0m] [90m18:08:23.032[0m [RAT-CACHE] [97m🔗 开始处理 TCP 连接[0m
[[92mINFO [0m] [90m18:08:23.032[0m [RAT-CACHE] [97m📨 接收到 21 字节数据[0m
[[92mINFO [0m] [90m18:08:23.032[0m [RAT-CACHE] [97m执行 GET 命令: ["buffer_test_key"][0m
[[92mINFO [0m] [90m18:08:23.032[0m [RAT-CACHE] [97mGET 命中: buffer_test_key (47500 bytes)[0m
[[92mINFO [0m] [90m18:08:23.032[0m [RAT-CACHE] [97m🔚 连接处理结束[0m
[[92mINFO [0m] [90m18:08:53.055[0m [RAT-CACHE] [97m🔚 连接处理结束[0m
